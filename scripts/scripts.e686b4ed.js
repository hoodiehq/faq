angular.module("faqApp",["ngAnimate","ngResource","ngSanitize","ngTouch","ui.router","angular-loading-bar","ngStorage"]).config(["$urlRouterProvider","$stateProvider","cfpLoadingBarProvider",function(a,b,c){"use strict";c.includeSpinner=!1,a.otherwise("/"),b.state("index",{url:"/",templateUrl:"views/index.html",controller:"MainCtrl"}).state("question",{url:"/question/:id",templateUrl:"views/question.html",controller:"QuestionCtrl"})}]).run(["$q","$window",function(a,b){"use strict";var c=a.defer(),d=b.applicationCache;d.addEventListener("updateready",c.resolve),c.promise.then(function(){b.location.reload()}),d.status===d.UPDATEREADY&&c.resolve()}]),angular.module("faqApp").controller("MainCtrl",["$scope","categoryData",function(a,b){"use strict";a.categories=[],b().then(function(b){a.categories=b})}]),angular.module("faqApp").service("questionData",["$http","$q","$localStorage",function(a,b,c){"use strict";var d=a.get("https://api.github.com/repos/hoodiehq/faq/issues?state=all&labels=answered",{cache:!0}),e=c.rawResponse?b.when(c.rawResponse):d;return d.then(function(a){c.rawResponse=a}),function(){return e.then(function(a){var b=_.map(a.data,function(a){var b={id:a.id,url:a.html_url,title:a.title,answer:a.body,updated:new Date(a.updated_at||a.created_at)},c=/^cat\:/;return _.each(a.labels,function(a){c.test(a.name)&&(b.category=a.name.replace(c,"").trim())}),b});return _.sortBy(b,function(a){return a.category+a.title})})}}]),angular.module("faqApp").controller("QuestionCtrl",["$scope","$state","$sanitize","questionData",function(a,b,c,d){"use strict";a.question={},a.isOutDated=function(a){return a.updated&&Date.now()-a.updated>2592e6?!0:!1},d().then(function(d){var e=_.find(d,function(a){return a.id+""==b.params.id+""});e.answer=c(marked(e.answer)),a.question=e})}]),angular.module("faqApp").service("categoryData",["questionData",function(a){"use strict";return function(){return a().then(function(a){return _.groupBy(a,"category")})}}]);